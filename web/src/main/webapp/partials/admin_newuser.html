<form name="form" novalidate class="form-horizontal">
    <div class="form-group">

    </div>
    <div class="form-group" ng-class="{'has-error': !(form.firstname.$valid)}">
        <label for="firstname" class="col-sm-2 control-label">First name</label>
        <div class="col-sm-10">
            <input placeholder="firstname" id="firstname" type="text" ng-minlength="3" name="firstname"
                   class="form-control"
                   ng-model="user.firstname" required/>
            <p class="help-block" ng-show="form.firstname.$error.required">firstname is required</p>
            <p class="help-block" ng-show="form.firstname.$error.minlength">firstname must be at least 3 characters</p>
        </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !(form.lastname.$valid)}">
        <label for="lastname" class="col-sm-2 control-label">Last name</label>
        <div class="col-sm-10">
            <input placeholder="lastname" id="lastname" type="text" ng-minlength="3" name="lastname"
                   class="form-control"
                   ng-model="user.lastname" required/>
            <p class="help-block" ng-show="form.lastname.$error.required">lastname is required</p>
            <p class="help-block" ng-show="form.lastname.$error.minlength">lastname must be at least 3 characters</p>
        </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !(form.password.$valid)}" ng-hide="updating">
        <label for="password" class="col-sm-2 control-label">Password</label>
        <div class="col-sm-10">
            <input placeholder="password" id="password" type="text" ng-minlength="8" name="password"
                   class="form-control"
                   ng-model="user.password" ng-required="!updating"/>
            <p class="help-block" ng-show="form.password.$error.required">password is required</p>
            <p class="help-block" ng-show="form.password.$error.minlength">name must be at least 8 characters</p>
        </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !(form.email.$valid)}">
        <label for="email" class="col-sm-2 control-label">Email</label>
        <div class="col-sm-10">
            <input placeholder="email" id="email" type="email" name="email" class="form-control" ng-model="user.email"
                   ng-pattern="/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$/" required/>
            <p class="help-block" ng-show="form.email.$error.required">email is required</p>
            <p class="help-block" ng-show="form.email.$error.email">email is not valid</p>
        </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !(form.birthdate.$valid)}">
        <label for="birthdate" class="col-sm-2 control-label">Birthday</label>
        <div class="col-sm-10">
            <input placeholder="yyyy-mm-dd" id="birthdate" type="date" name="birthdate" class="form-control"
                   ng-model="user.birthdate" required/>
        </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !(form.phone.$valid)}">
        <label for="phone" class="col-sm-2 control-label">Phone</label>
        <div class="col-sm-10">
            <input placeholder="111222333" id="phone" type="text" name="phone" class="form-control"
                   ng-model="user.phone"/>
        </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !(form.address.$valid)}">
        <label for="address" class="col-sm-2 control-label">Address</label>
        <div class="col-sm-10">
            <input placeholder="address" id="address" type="text" name="address" class="form-control"
                   ng-model="user.address"/>
            <p class="help-block" ng-show="form.address.$error.required">address is required</p>
        </div>
    </div>
    <div class="form-group row" ng-class="{'has-error': !(form.role.$valid)}">
        <label for="role" class="col-sm-2 control-label">Role</label>
        <div class="col-sm-10">
            <select class="form-control col-sm-10" id="role" name="role" ng-model="user.role" ng-options="role for role in roles"></select>
        </div>
    </div>
    <div class="form-group row" ng-class="{'has-error': !(form.gender.$valid)}">
        <label for="gender" class="col-sm-2 control-label">Gender</label>
        <div class="col-sm-10">
            <select class="form-control" id="gender" name="gender" ng-model="user.gender" ng-options="gender for gender in genders"></select>
        </div>
    </div>

    <!-- show disabled button if form is not valid -->
    <button ng-disabled="!form.$valid" class="btn btn-primary" type="submit" ng-click="create(user)" ng-show="!updating">Create user
</button>
    <button ng-disabled="!form.$valid" class="btn btn-primary" type="submit" ng-click="update(user)" ng-show="updating">Update user
    </button>
</form>